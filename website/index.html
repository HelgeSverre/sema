<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sema — A Lisp with LLM Primitives</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,300;0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0c0c0c;
    --bg-raised: #141414;
    --bg-code: #0a0a0a;
    --border: #222;
    --border-accent: #2a2520;
    --text: #d8d0c0;
    --text-dim: #7a7468;
    --text-bright: #f0ebe0;
    --gold: #c8a855;
    --gold-dim: #a08838;
    --green: #8aaa6a;
    --orange: #d08a60;
    --blue: #88a8c8;
    --purple: #b898c8;
    --serif: 'Cormorant', 'Georgia', serif;
    --mono: 'JetBrains Mono', monospace;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    font-family: var(--serif);
    background: var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
  }

  /* ——— Hero: full viewport ——— */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 4rem 2rem;
    position: relative;
    border-bottom: 1px solid var(--border);
  }

  .hero h1 {
    font-size: clamp(4rem, 10vw, 8rem);
    font-weight: 300;
    letter-spacing: 0.06em;
    color: var(--text-bright);
    line-height: 1;
    margin-bottom: 0.4em;
  }

  .hero .tagline {
    font-size: clamp(1.1rem, 2.5vw, 1.6rem);
    font-style: italic;
    color: var(--text-dim);
    max-width: 28em;
    line-height: 1.6;
    margin-bottom: 2.5rem;
  }

  .hero-install {
    font-family: var(--mono);
    font-size: 0.85rem;
    background: var(--bg-code);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.8rem 1.8rem;
    color: var(--text-bright);
    display: inline-block;
  }

  .hero-install .prompt { color: var(--gold); }

  .hero-scroll {
    position: absolute;
    bottom: 2.5rem;
    color: var(--text-dim);
    font-size: 1.1rem;
    font-style: italic;
    animation: drift 2s ease-in-out infinite;
  }

  @keyframes drift {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(6px); }
  }

  /* ——— Sticky nav ——— */
  nav {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(12,12,12,0.92);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    padding: 1rem 2rem;
    display: flex;
    justify-content: center;
    gap: 2.5rem;
  }

  nav a {
    font-family: var(--serif);
    font-size: 1.05rem;
    color: var(--text-dim);
    text-decoration: none;
    letter-spacing: 0.03em;
    transition: color 0.2s;
  }

  nav a:hover { color: var(--gold); }

  /* ——— Split sections: text | code side-by-side ——— */
  .split {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: 80vh;
    border-bottom: 1px solid var(--border);
  }

  .split.compact { min-height: auto; }

  .split.reverse { direction: rtl; }
  .split.reverse > * { direction: ltr; }

  .split-text {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 4rem 4rem 4rem 6rem;
  }

  .split.reverse .split-text {
    padding: 4rem 6rem 4rem 4rem;
  }

  .split-text h2 {
    font-size: 2.8rem;
    font-weight: 300;
    color: var(--text-bright);
    margin-bottom: 0.8rem;
    letter-spacing: 0.02em;
  }

  .split-text h2 .paren {
    color: var(--text-dim);
    font-weight: 300;
  }

  .split-text p {
    font-size: 1.2rem;
    line-height: 1.75;
    color: var(--text);
    margin-bottom: 1rem;
  }

  .split-text .label {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--gold);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 1rem;
  }

  .split-text ul {
    list-style: none;
    margin-bottom: 1rem;
  }

  .split-text ul li {
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--text);
    padding-left: 1.2em;
    position: relative;
    margin-bottom: 0.3em;
  }

  .split-text ul li::before {
    content: "·";
    position: absolute;
    left: 0;
    color: var(--gold-dim);
    font-weight: 600;
  }

  .split-code {
    background: var(--bg-code);
    display: flex;
    align-items: center;
    padding: 3rem;
    border-left: 1px solid var(--border);
    overflow-x: auto;
  }

  .split.reverse .split-code {
    border-left: none;
    border-right: 1px solid var(--border);
  }

  .split-code pre {
    width: 100%;
    line-height: 1.6;
    background: none;
    border: none;
    padding: 0;
    margin: 0;
  }

  .split-code code {
    font-family: var(--mono);
    font-size: 0.82rem;
  }

  /* ——— Syntax colors ——— */
  .c  { color: #5a5a4a; font-style: italic; }
  .k  { color: #d4a052; }
  .s  { color: #8aaa6a; }
  .n  { color: #d08a60; }
  .kw { color: #c89050; }
  .b  { color: #88a8b8; }
  .p  { color: #444438; }
  .v  { color: #b898c8; }

  /* ——— Section divider with title ——— */
  .section-divider {
    padding: 5rem 4rem 2rem;
    text-align: center;
    border-bottom: 1px solid var(--border);
  }

  .section-divider h2 {
    font-size: 2.8rem;
    font-weight: 300;
    color: var(--text-bright);
    letter-spacing: 0.02em;
    margin-bottom: 0.5rem;
  }

  .section-divider h2 .paren { color: var(--text-dim); }

  .section-divider p {
    font-size: 1.15rem;
    color: var(--text-dim);
    font-style: italic;
    max-width: 36em;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* ——— Reference tables ——— */
  .ref-section {
    padding: 4rem;
    border-bottom: 1px solid var(--border);
    max-width: 72rem;
    margin: 0 auto;
  }

  .ref-section h3 {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--gold);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
  }

  .type-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(15rem, 1fr));
    gap: 0.8rem;
    margin-bottom: 2rem;
  }

  .type-card {
    background: var(--bg-raised);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 1rem 1.2rem;
    display: flex;
    align-items: baseline;
    gap: 0.8rem;
  }

  .type-card .type-name {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--gold);
    white-space: nowrap;
    min-width: 5rem;
  }

  .type-card .type-ex {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--text-dim);
  }

  /* ——— Stdlib category grid ——— */
  .stdlib-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(20rem, 1fr));
    gap: 1.2rem;
  }

  .stdlib-card {
    background: var(--bg-raised);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.5rem;
  }

  .stdlib-card h4 {
    font-family: var(--mono);
    font-size: 0.72rem;
    color: var(--gold);
    letter-spacing: 0.06em;
    text-transform: uppercase;
    margin-bottom: 0.8rem;
  }

  .stdlib-card .fn-list {
    font-family: var(--mono);
    font-size: 0.68rem;
    color: var(--text-dim);
    line-height: 1.9;
    word-break: break-word;
  }

  .stdlib-card .fn-list span {
    display: inline-block;
    background: var(--bg-code);
    border: 1px solid var(--border);
    padding: 0.1em 0.45em;
    border-radius: 3px;
    margin: 0.1em 0.15em;
    white-space: nowrap;
  }

  /* ——— Features grid (full-width section) ——— */
  .features-section {
    padding: 6rem 4rem;
    border-bottom: 1px solid var(--border);
  }

  .features-section h2 {
    font-size: 2.8rem;
    font-weight: 300;
    color: var(--text-bright);
    text-align: center;
    margin-bottom: 3rem;
  }

  .features-section h2 .paren { color: var(--text-dim); }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    max-width: 72rem;
    margin: 0 auto;
  }

  .feat {
    background: var(--bg-raised);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 2rem;
    transition: border-color 0.2s;
  }

  .feat:hover { border-color: var(--border-accent); }

  .feat h3 {
    font-family: var(--mono);
    font-size: 0.75rem;
    color: var(--gold);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 0.6rem;
  }

  .feat p {
    font-family: var(--serif);
    font-size: 1.15rem;
    line-height: 1.6;
    color: var(--text);
  }

  .feat code {
    font-family: var(--mono);
    font-size: 0.78rem;
    color: var(--gold-dim);
    background: var(--bg-code);
    border: 1px solid var(--border);
    padding: 0.1em 0.4em;
    border-radius: 3px;
  }

  /* ——— Providers strip ——— */
  .providers-strip {
    padding: 3rem 4rem;
    border-bottom: 1px solid var(--border);
    text-align: center;
  }

  .providers-strip h3 {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--text-dim);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-bottom: 1.2rem;
  }

  .provider-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.8rem;
    max-width: 52rem;
    margin: 0 auto;
  }

  .provider-list span {
    font-family: var(--mono);
    font-size: 0.72rem;
    padding: 0.4em 1em;
    border: 1px solid var(--border);
    border-radius: 20px;
    color: var(--text);
    background: var(--bg-raised);
  }

  /* ——— Architecture section ——— */
  .arch-section {
    padding: 6rem 4rem;
    border-bottom: 1px solid var(--border);
    max-width: 64rem;
    margin: 0 auto;
  }

  .arch-section h2 {
    font-size: 2.8rem;
    font-weight: 300;
    color: var(--text-bright);
    text-align: center;
    margin-bottom: 1rem;
  }

  .arch-section h2 .paren { color: var(--text-dim); }

  .arch-section > p {
    font-size: 1.15rem;
    line-height: 1.7;
    color: var(--text);
    text-align: center;
    max-width: 40em;
    margin: 0 auto 2.5rem;
  }

  .crate-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .crate-card {
    background: var(--bg-raised);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.4rem;
  }

  .crate-card h4 {
    font-family: var(--mono);
    font-size: 0.78rem;
    color: var(--gold);
    margin-bottom: 0.3rem;
  }

  .crate-card p {
    font-size: 1rem;
    line-height: 1.5;
    color: var(--text-dim);
    margin: 0;
  }

  .arch-diagram {
    background: var(--bg-code);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
  }

  .arch-diagram pre {
    display: inline-block;
    text-align: left;
    line-height: 1.5;
    background: none;
    border: none;
    padding: 0;
    margin: 0;
  }

  .arch-diagram code {
    font-family: var(--mono);
    font-size: 0.82rem;
    color: var(--text-dim);
  }

  /* ——— Install section ——— */
  .install-section {
    padding: 6rem 4rem;
    text-align: center;
    border-bottom: 1px solid var(--border);
  }

  .install-section h2 {
    font-size: 2.8rem;
    font-weight: 300;
    color: var(--text-bright);
    margin-bottom: 0.5rem;
  }

  .install-section h2 .paren { color: var(--text-dim); }

  .install-section > p {
    font-size: 1.15rem;
    color: var(--text-dim);
    font-style: italic;
    margin-bottom: 2rem;
  }

  .install-methods {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    max-width: 52rem;
    margin: 0 auto 2.5rem;
  }

  .install-card {
    background: var(--bg-code);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 2rem;
    text-align: left;
  }

  .install-card h3 {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--gold);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 1rem;
  }

  .install-card pre {
    background: none;
    border: none;
    padding: 0;
    margin: 0;
    line-height: 1.7;
  }

  .install-card code {
    font-family: var(--mono);
    font-size: 0.8rem;
    color: var(--text-bright);
  }

  .install-card .prompt { color: var(--gold); }
  .install-card .comment { color: #5a5a4a; }

  .usage-block {
    max-width: 52rem;
    margin: 0 auto;
  }

  .usage-block h3 {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--gold);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    margin-bottom: 1rem;
  }

  .usage-block pre {
    background: var(--bg-code);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.6rem 2rem;
    text-align: left;
    line-height: 1.7;
  }

  .usage-block code {
    font-family: var(--mono);
    font-size: 0.8rem;
    color: var(--text-bright);
  }

  .usage-block .prompt { color: var(--gold); }
  .usage-block .comment { color: #5a5a4a; }
  .usage-block .output { color: var(--text-dim); }

  /* ——— Footer ——— */
  footer {
    text-align: center;
    padding: 3rem 2rem;
    color: var(--text-dim);
    font-size: 1rem;
    font-style: italic;
  }

  footer a { color: var(--text-dim); text-decoration: underline; }
  footer a:hover { color: var(--gold); }

  /* ——— Inline code in prose ——— */
  .ic {
    font-family: var(--mono);
    font-size: 0.85rem;
    color: var(--gold-dim);
  }

  /* ——— Responsive ——— */
  @media (max-width: 900px) {
    .split {
      grid-template-columns: 1fr;
      min-height: auto;
    }
    .split.reverse { direction: ltr; }
    .split-text { padding: 3rem 2rem; }
    .split.reverse .split-text { padding: 3rem 2rem; }
    .split-code {
      border-left: none;
      border-top: 1px solid var(--border);
      padding: 2rem;
    }
    .split.reverse .split-code { border-right: none; border-top: 1px solid var(--border); }
    .features-grid { grid-template-columns: 1fr; }
    .crate-grid { grid-template-columns: 1fr; }
    .install-methods { grid-template-columns: 1fr; }
    .features-section, .arch-section, .install-section, .providers-strip { padding: 3rem 1.5rem; }
    .ref-section { padding: 3rem 1.5rem; }
    .section-divider { padding: 3rem 1.5rem 1.5rem; }
    .stdlib-grid { grid-template-columns: 1fr; }
    nav { gap: 1.2rem; flex-wrap: wrap; }
  }
</style>
</head>
<body>

<!-- ——— Hero ——— -->
<div class="hero">
  <h1>Sema</h1>
  <p class="tagline">A Lisp with first-class LLM primitives, implemented in Rust.</p>
  <div class="hero-install">
    <span class="prompt">$</span> cargo install --git https://github.com/HelgeSverre/sema sema
  </div>
  <div class="hero-scroll">scroll</div>
</div>

<!-- ——— Nav ——— -->
<nav>
  <a href="#language">Language</a>
  <a href="#data">Data</a>
  <a href="#stdlib">Stdlib</a>
  <a href="#llm">LLM</a>
  <a href="#features">Features</a>
  <a href="#install">Install</a>
  <a href="https://github.com/HelgeSverre/sema">GitHub</a>
</nav>

<!-- ═══════════════════════════════════════════════════════
     LANGUAGE OVERVIEW
     ═══════════════════════════════════════════════════════ -->

<section id="language" class="split">
  <div class="split-text">
    <div class="label">The Language</div>
    <h2><span class="paren">(</span>Scheme meets Clojure<span class="paren">)</span></h2>
    <p>
      A Scheme-like core with Clojure-style keywords (<code class="ic">:foo</code>),
      map literals (<code class="ic">{:key val}</code>),
      and vector literals (<code class="ic">[1 2 3]</code>).
    </p>
    <p>
      Tail-call optimized via trampoline. Closures, macros, pattern matching,
      higher-order functions, and a module system&mdash;all in a single-threaded
      evaluator small enough to read in an afternoon.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Recursion with TCO</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span>factorial n<span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="b">&lt;=</span> n <span class="n">1</span><span class="p">)</span> <span class="n">1</span> <span class="p">(</span><span class="b">*</span> n <span class="p">(</span>factorial <span class="p">(</span><span class="b">-</span> n <span class="n">1</span><span class="p">)))))</span>
<span class="p">(</span>factorial <span class="n">10</span><span class="p">)</span> <span class="c">; =&gt; 3628800</span>

<span class="c">;; Higher-order functions</span>
<span class="p">(</span><span class="b">map</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">(</span><span class="b">*</span> x x<span class="p">))</span> <span class="p">(</span><span class="b">range</span> <span class="n">1</span> <span class="n">6</span><span class="p">))</span>
<span class="c">; =&gt; (1 4 9 16 25)</span>

<span class="p">(</span><span class="b">filter</span> <span class="b">even?</span> <span class="p">(</span><span class="b">range</span> <span class="n">1</span> <span class="n">11</span><span class="p">))</span>
<span class="c">; =&gt; (2 4 6 8 10)</span>

<span class="p">(</span><span class="b">foldl</span> <span class="b">+</span> <span class="n">0</span> <span class="p">(</span><span class="b">range</span> <span class="n">1</span> <span class="n">11</span><span class="p">))</span>
<span class="c">; =&gt; 55</span>

<span class="c">;; Maps &mdash; keywords are functions</span>
<span class="p">(</span><span class="k">define</span> person <span class="p">{</span><span class="kw">:name</span> <span class="s">"Ada"</span> <span class="kw">:age</span> <span class="n">36</span><span class="p">})</span>
<span class="p">(</span><span class="kw">:name</span> person<span class="p">)</span>  <span class="c">; =&gt; "Ada"</span>

<span class="c">;; Closures and composition</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span>compose f g<span class="p">)</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">(</span>f <span class="p">(</span>g x<span class="p">))))</span>

<span class="p">(</span><span class="k">define</span> inc-then-double
  <span class="p">(</span>compose <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">(</span><span class="b">*</span> x <span class="n">2</span><span class="p">))</span>
           <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">(</span><span class="b">+</span> x <span class="n">1</span><span class="p">))))</span>
<span class="p">(</span>inc-then-double <span class="n">5</span><span class="p">)</span> <span class="c">; =&gt; 12</span></code></pre>
  </div>
</section>

<!-- ——— Bindings & Control Flow ——— -->
<section class="split reverse compact">
  <div class="split-text">
    <div class="label">Control Flow</div>
    <h2><span class="paren">(</span>Bindings &amp; branches<span class="paren">)</span></h2>
    <p>
      <code class="ic">let</code>, <code class="ic">let*</code>, and <code class="ic">letrec</code>
      for local bindings. Named <code class="ic">let</code> for tail-recursive loops.
      <code class="ic">cond</code> and <code class="ic">case</code> for multi-way branching.
    </p>
    <p>
      Scheme <code class="ic">do</code> loops with parallel variable update.
      <code class="ic">delay</code> / <code class="ic">force</code> for lazy evaluation
      with memoized promises.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Let bindings</span>
<span class="p">(</span><span class="k">let</span> <span class="p">((</span>x <span class="n">10</span><span class="p">)</span> <span class="p">(</span>y <span class="n">20</span><span class="p">))</span>
  <span class="p">(</span><span class="b">+</span> x y<span class="p">))</span>  <span class="c">; =&gt; 30</span>

<span class="c">;; Named let &mdash; tail-recursive loop</span>
<span class="p">(</span><span class="k">let</span> loop <span class="p">((</span>i <span class="n">0</span><span class="p">)</span> <span class="p">(</span>sum <span class="n">0</span><span class="p">))</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="b">=</span> i <span class="n">100</span><span class="p">)</span> sum
    <span class="p">(</span>loop <span class="p">(</span><span class="b">+</span> i <span class="n">1</span><span class="p">)</span> <span class="p">(</span><span class="b">+</span> sum i<span class="p">))))</span>
<span class="c">; =&gt; 4950</span>

<span class="c">;; Cond and case</span>
<span class="p">(</span><span class="k">cond</span>
  <span class="p">((</span><span class="b">&lt;</span> x <span class="n">0</span><span class="p">)</span> <span class="s">"negative"</span><span class="p">)</span>
  <span class="p">((</span><span class="b">=</span> x <span class="n">0</span><span class="p">)</span> <span class="s">"zero"</span><span class="p">)</span>
  <span class="p">(</span>else    <span class="s">"positive"</span><span class="p">))</span>

<span class="c">;; Do loop &mdash; Scheme iteration</span>
<span class="p">(</span><span class="k">do</span> <span class="p">((</span>i <span class="n">0</span> <span class="p">(</span><span class="b">+</span> i <span class="n">1</span><span class="p">))</span>
     <span class="p">(</span>sum <span class="n">0</span> <span class="p">(</span><span class="b">+</span> sum i<span class="p">)))</span>
    <span class="p">((</span><span class="b">=</span> i <span class="n">10</span><span class="p">)</span> sum<span class="p">))</span>  <span class="c">; =&gt; 45</span>

<span class="c">;; Lazy evaluation</span>
<span class="p">(</span><span class="k">define</span> p <span class="p">(</span><span class="k">delay</span> <span class="p">(</span><span class="b">+</span> <span class="n">1</span> <span class="n">2</span><span class="p">)))</span>
<span class="p">(</span><span class="k">force</span> p<span class="p">)</span>  <span class="c">; =&gt; 3 (memoized)</span></code></pre>
  </div>
</section>

<!-- ——— Error Handling & Modules ——— -->
<section class="split compact">
  <div class="split-text">
    <div class="label">Resilience</div>
    <h2><span class="paren">(</span>try / catch / throw<span class="paren">)</span></h2>
    <p>
      Structured error handling with typed error maps.
      <code class="ic">catch</code> binds an error map with
      <code class="ic">:type</code>, <code class="ic">:message</code>, and
      <code class="ic">:stack-trace</code> keys.
    </p>
    <p>
      File-based module system with <code class="ic">import</code> and selective
      <code class="ic">export</code>. Modules are cached by canonical path
      and isolated from the caller&rsquo;s scope.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Error handling</span>
<span class="p">(</span><span class="k">try</span>
  <span class="p">(</span><span class="b">/</span> <span class="n">1</span> <span class="n">0</span><span class="p">)</span>
  <span class="p">(</span><span class="k">catch</span> e
    <span class="p">(</span><span class="b">println</span> <span class="p">(</span><span class="kw">:message</span> e<span class="p">))</span>
    <span class="p">(</span><span class="kw">:type</span> e<span class="p">)))</span>  <span class="c">; =&gt; :eval</span>

<span class="p">(</span><span class="k">throw</span> <span class="p">{</span><span class="kw">:code</span> <span class="n">404</span> <span class="kw">:reason</span> <span class="s">"not found"</span><span class="p">})</span>

<span class="c">;; Modules</span>
<span class="c">;; math-utils.sema</span>
<span class="p">(</span><span class="k">module</span> math-utils
  <span class="p">(</span><span class="k">export</span> square cube<span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="p">(</span>square x<span class="p">)</span> <span class="p">(</span><span class="b">*</span> x x<span class="p">))</span>
  <span class="p">(</span><span class="k">define</span> <span class="p">(</span>cube x<span class="p">)</span>   <span class="p">(</span><span class="b">*</span> x x x<span class="p">)))</span>

<span class="c">;; main.sema</span>
<span class="p">(</span><span class="k">import</span> <span class="s">"math-utils.sema"</span><span class="p">)</span>
<span class="p">(</span>square <span class="n">5</span><span class="p">)</span>  <span class="c">; =&gt; 25</span>
<span class="p">(</span>cube <span class="n">3</span><span class="p">)</span>    <span class="c">; =&gt; 27</span></code></pre>
  </div>
</section>

<!-- ——— Macros & Metaprogramming ——— -->
<section class="split reverse compact">
  <div class="split-text">
    <div class="label">Metaprogramming</div>
    <h2><span class="paren">(</span>Code is data<span class="paren">)</span></h2>
    <p>
      <code class="ic">defmacro</code> with quasiquote, unquote, and splicing.
      <code class="ic">eval</code> and <code class="ic">read</code> for runtime
      code generation. <code class="ic">gensym</code> for unique symbols.
    </p>
    <p>
      Macros expand in the caller&rsquo;s environment, giving access to all
      builtins. Inspect expansions with <code class="ic">macroexpand</code>.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Define a macro</span>
<span class="p">(</span><span class="k">defmacro</span> unless <span class="p">(</span>test . body<span class="p">)</span>
  <span class="p">`(</span><span class="k">if</span> ,test <span class="b">nil</span> <span class="p">(</span><span class="k">begin</span> ,@body<span class="p">)))</span>

<span class="p">(</span>unless <span class="b">#f</span>
  <span class="p">(</span><span class="b">println</span> <span class="s">"this runs!"</span><span class="p">))</span>

<span class="c">;; Inspect the expansion</span>
<span class="p">(</span><span class="k">macroexpand</span> '<span class="p">(</span>unless <span class="b">#f</span> <span class="p">(</span><span class="b">println</span> <span class="s">"x"</span><span class="p">)))</span>
<span class="c">; =&gt; (if #f nil (begin (println "x")))</span>

<span class="c">;; Runtime eval</span>
<span class="p">(</span><span class="k">eval</span> <span class="p">(</span><span class="b">read</span> <span class="s">"(+ 1 2 3)"</span><span class="p">))</span>  <span class="c">; =&gt; 6</span>

<span class="c">;; Unique symbols for macro hygiene</span>
<span class="p">(</span><span class="b">gensym</span> <span class="s">"tmp"</span><span class="p">)</span>  <span class="c">; =&gt; tmp_42</span></code></pre>
  </div>
</section>

<!-- ——— Record Types ——— -->
<section class="split compact">
  <div class="split-text">
    <div class="label">Structured Data</div>
    <h2><span class="paren">(</span>Record types<span class="paren">)</span></h2>
    <p>
      R7RS-style <code class="ic">define-record-type</code> generates a constructor,
      a type predicate, and field accessors automatically. Records are
      first-class values with named fields.
    </p>
    <p>
      Bytevectors (<code class="ic">#u8(...)</code>) provide efficient byte-level
      data with UTF-8 conversion via <code class="ic">utf8-&gt;string</code>
      and <code class="ic">string-&gt;utf8</code>.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Define a record type</span>
<span class="p">(</span><span class="k">define-record-type</span> &lt;point&gt;
  <span class="p">(</span>make-point x y<span class="p">)</span>
  point?
  <span class="p">(</span>x point-x<span class="p">)</span>
  <span class="p">(</span>y point-y<span class="p">))</span>

<span class="p">(</span><span class="k">define</span> p <span class="p">(</span>make-point <span class="n">3</span> <span class="n">4</span><span class="p">))</span>
<span class="p">(</span>point? p<span class="p">)</span>    <span class="c">; =&gt; #t</span>
<span class="p">(</span>point-x p<span class="p">)</span>   <span class="c">; =&gt; 3</span>
<span class="p">(</span>point-y p<span class="p">)</span>   <span class="c">; =&gt; 4</span>

<span class="c">;; Bytevectors</span>
<span class="p">(</span><span class="k">define</span> bv <span class="n">#u8(72 101 108 108 111)</span><span class="p">)</span>
<span class="p">(</span><span class="b">utf8-&gt;string</span> bv<span class="p">)</span>  <span class="c">; =&gt; "Hello"</span>
<span class="p">(</span><span class="b">bytevector-length</span> bv<span class="p">)</span>  <span class="c">; =&gt; 5</span>
<span class="p">(</span><span class="b">string-&gt;utf8</span> <span class="s">"hi"</span><span class="p">)</span>  <span class="c">; =&gt; #u8(104 105)</span></code></pre>
  </div>
</section>

<!-- ═══════════════════════════════════════════════════════
     DATA TYPES
     ═══════════════════════════════════════════════════════ -->

<div id="data" class="section-divider">
  <h2><span class="paren">(</span>Data types<span class="paren">)</span></h2>
  <p>Twenty types, from integers to agents. Everything is a value.</p>
</div>

<div class="ref-section">
  <h3>Core Types</h3>
  <div class="type-grid">
    <div class="type-card"><span class="type-name">Integer</span> <span class="type-ex">42 &nbsp;-7 &nbsp;0</span></div>
    <div class="type-card"><span class="type-name">Float</span> <span class="type-ex">3.14 &nbsp;-0.5 &nbsp;1e10</span></div>
    <div class="type-card"><span class="type-name">String</span> <span class="type-ex">"hello" &nbsp;"line\nbreak"</span></div>
    <div class="type-card"><span class="type-name">Boolean</span> <span class="type-ex">#t &nbsp;#f</span></div>
    <div class="type-card"><span class="type-name">Nil</span> <span class="type-ex">nil</span></div>
    <div class="type-card"><span class="type-name">Symbol</span> <span class="type-ex">foo &nbsp;my-var &nbsp;+</span></div>
    <div class="type-card"><span class="type-name">Keyword</span> <span class="type-ex">:name &nbsp;:type &nbsp;:ok</span></div>
    <div class="type-card"><span class="type-name">Character</span> <span class="type-ex">#\a &nbsp;#\space &nbsp;#\newline</span></div>
    <div class="type-card"><span class="type-name">List</span> <span class="type-ex">(1 2 3) &nbsp;(+ a b)</span></div>
    <div class="type-card"><span class="type-name">Vector</span> <span class="type-ex">[1 2 3] &nbsp;["a" "b"]</span></div>
    <div class="type-card"><span class="type-name">Map</span> <span class="type-ex">{:name "Ada" :age 36}</span></div>
    <div class="type-card"><span class="type-name">HashMap</span> <span class="type-ex">(hashmap/new :a 1 :b 2)</span></div>
    <div class="type-card"><span class="type-name">Record</span> <span class="type-ex">(define-record-type &lt;point&gt; ...)</span></div>
    <div class="type-card"><span class="type-name">Bytevector</span> <span class="type-ex">#u8(0 127 255)</span></div>
  </div>

  <h3>LLM Types</h3>
  <div class="type-grid">
    <div class="type-card"><span class="type-name">Prompt</span> <span class="type-ex">(prompt (user "hi"))</span></div>
    <div class="type-card"><span class="type-name">Message</span> <span class="type-ex">(message :user "hi")</span></div>
    <div class="type-card"><span class="type-name">Conversation</span> <span class="type-ex">(conversation/new {})</span></div>
    <div class="type-card"><span class="type-name">Tool</span> <span class="type-ex">(deftool name ...)</span></div>
    <div class="type-card"><span class="type-name">Agent</span> <span class="type-ex">(defagent name ...)</span></div>
    <div class="type-card"><span class="type-name">Promise</span> <span class="type-ex">(delay expr)</span></div>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════════
     STANDARD LIBRARY
     ═══════════════════════════════════════════════════════ -->

<div id="stdlib" class="section-divider">
  <h2><span class="paren">(</span>Standard library<span class="paren">)</span></h2>
  <p>Comprehensive standard library. Slash-namespaced by convention.</p>
</div>

<!-- ——— Stdlib: Lists ——— -->
<section class="split compact">
  <div class="split-text">
    <div class="label">Collections</div>
    <h2><span class="paren">(</span>Lists &amp; Maps<span class="paren">)</span></h2>
    <p>
      Linked lists, vectors, and ordered maps with a full suite of
      higher-order operations: <code class="ic">map</code>, <code class="ic">filter</code>,
      <code class="ic">foldl</code>, <code class="ic">reduce</code>,
      <code class="ic">sort</code>, <code class="ic">zip</code>,
      <code class="ic">partition</code>, and more.
    </p>
    <p>
      Multi-list <code class="ic">map</code> applies a function across
      parallel lists. Keywords in function position act as map accessors.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Lists</span>
<span class="p">(</span><span class="b">map</span> <span class="b">+</span> '<span class="p">(</span><span class="n">1</span> <span class="n">2</span> <span class="n">3</span><span class="p">)</span> '<span class="p">(</span><span class="n">10</span> <span class="n">20</span> <span class="n">30</span><span class="p">))</span>  <span class="c">; =&gt; (11 22 33)</span>
<span class="p">(</span><span class="b">zip</span> '<span class="p">(</span><span class="n">1</span> <span class="n">2</span><span class="p">)</span> '<span class="p">(</span><span class="s">"a"</span> <span class="s">"b"</span><span class="p">))</span>    <span class="c">; =&gt; ((1 "a") (2 "b"))</span>
<span class="p">(</span><span class="b">take</span> <span class="n">3</span> <span class="p">(</span><span class="b">range</span> <span class="n">10</span><span class="p">))</span>          <span class="c">; =&gt; (0 1 2)</span>
<span class="p">(</span><span class="b">sort-by</span> <span class="b">length</span> '<span class="p">(</span><span class="s">"bb"</span> <span class="s">"a"</span> <span class="s">"ccc"</span><span class="p">))</span>
<span class="c">; =&gt; ("a" "bb" "ccc")</span>
<span class="p">(</span><span class="b">list/unique</span> '<span class="p">(</span><span class="n">1</span> <span class="n">2</span> <span class="n">2</span> <span class="n">3</span><span class="p">))</span>     <span class="c">; =&gt; (1 2 3)</span>
<span class="p">(</span><span class="b">frequencies</span> '<span class="p">(</span>a b a c b a<span class="p">))</span>
<span class="c">; =&gt; {a 3 b 2 c 1}</span>

<span class="c">;; Maps</span>
<span class="p">(</span><span class="k">define</span> m <span class="p">{</span><span class="kw">:a</span> <span class="n">1</span> <span class="kw">:b</span> <span class="n">2</span> <span class="kw">:c</span> <span class="n">3</span><span class="p">})</span>
<span class="p">(</span><span class="b">assoc</span> m <span class="kw">:d</span> <span class="n">4</span><span class="p">)</span>               <span class="c">; =&gt; {:a 1 :b 2 :c 3 :d 4}</span>
<span class="p">(</span><span class="b">map/filter</span> <span class="p">(</span><span class="k">fn</span> <span class="p">(</span>k v<span class="p">)</span> <span class="p">(</span><span class="b">&gt;</span> v <span class="n">1</span><span class="p">))</span> m<span class="p">)</span>
<span class="c">; =&gt; {:b 2 :c 3}</span>
<span class="p">(</span><span class="b">map/select-keys</span> m '<span class="p">(</span><span class="kw">:a</span> <span class="kw">:c</span><span class="p">))</span> <span class="c">; =&gt; {:a 1 :c 3}</span></code></pre>
  </div>
</section>

<!-- ——— Stdlib: Strings & Regex ——— -->
<section class="split reverse compact">
  <div class="split-text">
    <div class="label">Text</div>
    <h2><span class="paren">(</span>Strings &amp; Characters<span class="paren">)</span></h2>
    <p>
      Slash-namespaced string operations: split, join, trim, upper, lower,
      pad, replace, contains, starts-with, ends-with, repeat, chars.
      First-class character type with <code class="ic">#\a</code> literals,
      predicates, and case conversion.
    </p>
    <p>
      Full regex support via Rust&rsquo;s <code class="ic">regex</code> crate:
      match, find-all, replace, split.
      Convert between strings and character lists with
      <code class="ic">string-&gt;list</code> / <code class="ic">list-&gt;string</code>.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; String operations</span>
<span class="p">(</span><span class="b">string/split</span> <span class="s">"a,b,c"</span> <span class="s">","</span><span class="p">)</span>     <span class="c">; =&gt; ("a" "b" "c")</span>
<span class="p">(</span><span class="b">string/join</span> '<span class="p">(</span><span class="s">"a"</span> <span class="s">"b"</span><span class="p">)</span> <span class="s">", "</span><span class="p">)</span> <span class="c">; =&gt; "a, b"</span>
<span class="p">(</span><span class="b">string/upper</span> <span class="s">"hello"</span><span class="p">)</span>        <span class="c">; =&gt; "HELLO"</span>
<span class="p">(</span><span class="b">string/pad-left</span> <span class="s">"42"</span> <span class="n">5</span> <span class="s">"0"</span><span class="p">)</span> <span class="c">; =&gt; "00042"</span>
<span class="p">(</span><span class="b">format</span> <span class="s">"~a is ~a"</span> <span class="s">"Sema"</span> <span class="s">"great"</span><span class="p">)</span>

<span class="c">;; Characters</span>
<span class="p">(</span><span class="b">string-&gt;list</span> <span class="s">"hello"</span><span class="p">)</span>
<span class="c">; =&gt; (#\h #\e #\l #\l #\o)</span>
<span class="p">(</span><span class="b">char-upcase</span> <span class="n">#\a</span><span class="p">)</span>          <span class="c">; =&gt; #\A</span>
<span class="p">(</span><span class="b">char-&gt;integer</span> <span class="n">#\A</span><span class="p">)</span>        <span class="c">; =&gt; 65</span>
<span class="p">(</span><span class="b">list-&gt;string</span> '<span class="p">(</span><span class="n">#\h</span> <span class="n">#\i</span><span class="p">))</span>  <span class="c">; =&gt; "hi"</span>

<span class="c">;; Regular expressions</span>
<span class="p">(</span><span class="b">regex/match?</span> <span class="s">"\\d+"</span> <span class="s">"abc123"</span><span class="p">)</span>
<span class="c">; =&gt; #t</span>
<span class="p">(</span><span class="b">regex/find-all</span> <span class="s">"\\d+"</span> <span class="s">"a1b2c3"</span><span class="p">)</span>
<span class="c">; =&gt; ("1" "2" "3")</span></code></pre>
  </div>
</section>

<!-- ——— Stdlib: IO, HTTP, System ——— -->
<section class="split compact">
  <div class="split-text">
    <div class="label">Real-World I/O</div>
    <h2><span class="paren">(</span>Files, HTTP &amp; system<span class="paren">)</span></h2>
    <p>
      File operations: read, write, append, copy, delete, rename, list,
      mkdir, info. Paths: join, dirname, basename, extension, absolute.
    </p>
    <p>
      HTTP client with <code class="ic">http/get</code>,
      <code class="ic">http/post</code>, <code class="ic">http/put</code>,
      <code class="ic">http/delete</code>. Map bodies auto-serialize as JSON.
      Shell access, environment variables, and system introspection.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; File I/O</span>
<span class="p">(</span><span class="b">file/write</span> <span class="s">"out.txt"</span> <span class="s">"hello"</span><span class="p">)</span>
<span class="p">(</span><span class="b">file/read</span> <span class="s">"out.txt"</span><span class="p">)</span>  <span class="c">; =&gt; "hello"</span>
<span class="p">(</span><span class="b">file/exists?</span> <span class="s">"out.txt"</span><span class="p">)</span>  <span class="c">; =&gt; #t</span>

<span class="c">;; HTTP</span>
<span class="p">(</span><span class="k">define</span> resp <span class="p">(</span><span class="b">http/get</span> <span class="s">"https://api.example.com/data"</span><span class="p">))</span>
<span class="p">(</span><span class="kw">:status</span> resp<span class="p">)</span>  <span class="c">; =&gt; 200</span>
<span class="p">(</span><span class="kw">:body</span> resp<span class="p">)</span>    <span class="c">; =&gt; "..."</span>

<span class="p">(</span><span class="b">http/post</span> <span class="s">"https://api.example.com/items"</span>
  <span class="p">{</span><span class="kw">:body</span> <span class="p">{</span><span class="kw">:name</span> <span class="s">"widget"</span><span class="p">}})</span>

<span class="c">;; JSON</span>
<span class="p">(</span><span class="b">json/decode</span> <span class="p">(</span><span class="kw">:body</span> resp<span class="p">))</span>  <span class="c">; =&gt; {:key "val"}</span>
<span class="p">(</span><span class="b">json/encode</span> <span class="p">{</span><span class="kw">:a</span> <span class="n">1</span><span class="p">})</span>       <span class="c">; =&gt; "{\"a\":1}"</span>

<span class="c">;; System</span>
<span class="p">(</span><span class="b">shell</span> <span class="s">"ls -la"</span><span class="p">)</span>  <span class="c">; =&gt; stdout output</span>
<span class="p">(</span><span class="b">env</span> <span class="s">"HOME"</span><span class="p">)</span>       <span class="c">; =&gt; "/Users/ada"</span>
<span class="p">(</span><span class="b">sys/platform</span><span class="p">)</span>    <span class="c">; =&gt; "macos"</span></code></pre>
  </div>
</section>

<!-- ——— Stdlib reference grid ——— -->
<div class="ref-section">
  <h3>Function Reference</h3>
  <div class="stdlib-grid">
    <div class="stdlib-card">
      <h4>Arithmetic &amp; Math</h4>
      <div class="fn-list">
        <span>+</span> <span>-</span> <span>*</span> <span>/</span> <span>mod</span>
        <span>abs</span> <span>min</span> <span>max</span> <span>pow</span> <span>sqrt</span> <span>log</span>
        <span>floor</span> <span>ceil</span> <span>round</span>
        <span>sin</span> <span>cos</span> <span>math/tan</span>
        <span>math/asin</span> <span>math/acos</span> <span>math/atan</span> <span>math/atan2</span>
        <span>math/exp</span> <span>math/log10</span> <span>math/log2</span>
        <span>math/gcd</span> <span>math/lcm</span>
        <span>math/random</span> <span>math/random-int</span>
        <span>math/clamp</span> <span>math/sign</span>
        <span>pi</span> <span>e</span>
        <span>modulo</span> <span>expt</span> <span>ceiling</span> <span>truncate</span>
        <span>math/sinh</span> <span>math/cosh</span> <span>math/tanh</span>
        <span>math/degrees-&gt;radians</span> <span>math/radians-&gt;degrees</span>
        <span>math/lerp</span> <span>math/map-range</span>
        <span>math/nan?</span> <span>math/infinite?</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Bitwise</h4>
      <div class="fn-list">
        <span>bit/and</span> <span>bit/or</span> <span>bit/xor</span>
        <span>bit/not</span> <span>bit/shift-left</span> <span>bit/shift-right</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Strings</h4>
      <div class="fn-list">
        <span>string-append</span> <span>string-length</span> <span>string-ref</span> <span>substring</span>
        <span>str</span> <span>format</span>
        <span>string/split</span> <span>string/join</span> <span>string/trim</span>
        <span>string/upper</span> <span>string/lower</span>
        <span>string/contains?</span> <span>string/starts-with?</span> <span>string/ends-with?</span>
        <span>string/replace</span> <span>string/index-of</span> <span>string/chars</span>
        <span>string/repeat</span> <span>string/pad-left</span> <span>string/pad-right</span>
        <span>char-&gt;integer</span> <span>integer-&gt;char</span>
        <span>char-alphabetic?</span> <span>char-numeric?</span> <span>char-whitespace?</span>
        <span>char-upper-case?</span> <span>char-lower-case?</span>
        <span>char-upcase</span> <span>char-downcase</span>
        <span>char-&gt;string</span> <span>string-&gt;char</span>
        <span>char=?</span> <span>char&lt;?</span> <span>char&gt;?</span> <span>char&lt;=?</span> <span>char&gt;=?</span>
        <span>char-ci=?</span> <span>char-ci&lt;?</span> <span>char-ci&gt;?</span> <span>char-ci&lt;=?</span> <span>char-ci&gt;=?</span>
        <span>string-&gt;list</span> <span>list-&gt;string</span>
        <span>string/map</span>
        <span>string/capitalize</span> <span>string/title-case</span> <span>string/reverse</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Lists</h4>
      <div class="fn-list">
        <span>list</span> <span>cons</span> <span>car</span> <span>cdr</span>
        <span>caar</span> <span>cadr</span> <span>cdar</span> <span>cddr</span>
        <span>caaar</span> <span>caadr</span> <span>cadar</span> <span>caddr</span>
        <span>cdaar</span> <span>cdadr</span> <span>cddar</span> <span>cdddr</span>
        <span>first</span> <span>rest</span> <span>last</span> <span>nth</span> <span>length</span>
        <span>append</span> <span>reverse</span> <span>range</span>
        <span>map</span> <span>filter</span> <span>foldl</span> <span>foldr</span>
        <span>reduce</span> <span>for-each</span> <span>apply</span>
        <span>sort</span> <span>sort-by</span>
        <span>take</span> <span>drop</span> <span>flatten</span> <span>zip</span>
        <span>partition</span> <span>member</span> <span>any</span> <span>every</span>
        <span>list/unique</span> <span>list/index-of</span>
        <span>list/group-by</span> <span>list/interleave</span> <span>list/chunk</span>
        <span>frequencies</span> <span>interpose</span>
        <span>assq</span> <span>assv</span>
        <span>list/shuffle</span> <span>list/pick</span>
        <span>list/split-at</span> <span>list/take-while</span> <span>list/drop-while</span>
        <span>list/sum</span> <span>list/min</span> <span>list/max</span>
        <span>list/repeat</span> <span>make-list</span> <span>iota</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Maps</h4>
      <div class="fn-list">
        <span>hash-map</span> <span>get</span> <span>assoc</span> <span>dissoc</span>
        <span>merge</span> <span>keys</span> <span>vals</span> <span>contains?</span> <span>count</span>
        <span>map/entries</span> <span>map/from-entries</span>
        <span>map/map-vals</span> <span>map/map-keys</span>
        <span>map/filter</span> <span>map/select-keys</span> <span>map/update</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Predicates</h4>
      <div class="fn-list">
        <span>null?</span> <span>nil?</span> <span>empty?</span>
        <span>list?</span> <span>vector?</span> <span>map?</span>
        <span>number?</span> <span>integer?</span> <span>float?</span>
        <span>string?</span> <span>symbol?</span> <span>keyword?</span>
        <span>char?</span> <span>bool?</span> <span>fn?</span>
        <span>bytevector?</span> <span>record?</span>
        <span>promise?</span> <span>promise-forced?</span>
        <span>zero?</span> <span>even?</span> <span>odd?</span>
        <span>positive?</span> <span>negative?</span>
        <span>eq?</span> <span>not</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>File I/O &amp; Paths</h4>
      <div class="fn-list">
        <span>file/read</span> <span>file/write</span> <span>file/append</span>
        <span>file/read-lines</span> <span>file/write-lines</span>
        <span>file/delete</span> <span>file/rename</span> <span>file/copy</span>
        <span>file/exists?</span> <span>file/is-file?</span> <span>file/is-directory?</span>
        <span>file/list</span> <span>file/mkdir</span> <span>file/info</span>
        <span>path/join</span> <span>path/dirname</span> <span>path/basename</span>
        <span>path/extension</span> <span>path/absolute</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>HTTP &amp; JSON</h4>
      <div class="fn-list">
        <span>http/get</span> <span>http/post</span> <span>http/put</span>
        <span>http/delete</span> <span>http/request</span>
        <span>json/encode</span> <span>json/decode</span> <span>json/encode-pretty</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Regex</h4>
      <div class="fn-list">
        <span>regex/match?</span> <span>regex/match</span>
        <span>regex/find-all</span>
        <span>regex/replace</span> <span>regex/replace-all</span>
        <span>regex/split</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Date, Time &amp; System</h4>
      <div class="fn-list">
        <span>time/now</span> <span>time-ms</span>
        <span>time/format</span> <span>time/parse</span> <span>time/date-parts</span>
        <span>time/add</span> <span>time/diff</span> <span>sleep</span>
        <span>env</span> <span>shell</span> <span>exit</span>
        <span>sys/args</span> <span>sys/cwd</span> <span>sys/platform</span> <span>sys/env-all</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Crypto, CSV &amp; Encoding</h4>
      <div class="fn-list">
        <span>uuid/v4</span> <span>hash/sha256</span>
        <span>base64/encode</span> <span>base64/decode</span>
        <span>csv/parse</span> <span>csv/parse-maps</span> <span>csv/encode</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Type Conversions</h4>
      <div class="fn-list">
        <span>type</span> <span>int</span> <span>float</span>
        <span>string-&gt;number</span> <span>number-&gt;string</span>
        <span>string-&gt;symbol</span> <span>symbol-&gt;string</span>
        <span>string-&gt;keyword</span> <span>keyword-&gt;string</span>
        <span>list-&gt;vector</span> <span>vector-&gt;list</span>
        <span>read</span> <span>read-many</span> <span>gensym</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Bytevectors</h4>
      <div class="fn-list">
        <span>make-bytevector</span> <span>bytevector</span>
        <span>bytevector-length</span> <span>bytevector-u8-ref</span> <span>bytevector-u8-set!</span>
        <span>bytevector-copy</span> <span>bytevector-append</span>
        <span>bytevector-&gt;list</span> <span>list-&gt;bytevector</span>
        <span>utf8-&gt;string</span> <span>string-&gt;utf8</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Records</h4>
      <div class="fn-list">
        <span>define-record-type</span>
      </div>
    </div>
  </div>
</div>


<!-- ═══════════════════════════════════════════════════════
     LLM PRIMITIVES
     ═══════════════════════════════════════════════════════ -->

<section id="llm" class="split reverse">
  <div class="split-text">
    <div class="label">LLM Primitives</div>
    <h2><span class="paren">(</span>Prompts are data<span class="paren">)</span></h2>
    <p>
      Conversations are persistent values. Prompts compose like any other
      s-expression. Completions, chat, structured extraction, classification,
      tool use, and agentic loops&mdash;all as native forms.
    </p>
    <p>
      11 providers auto-configured from environment variables.
      Cost tracking, budgets, and batch processing built in.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Simple completion</span>
<span class="p">(</span><span class="b">llm/complete</span> <span class="s">"Say hello in 5 words"</span>
  <span class="p">{</span><span class="kw">:max-tokens</span> <span class="n">50</span><span class="p">})</span>

<span class="c">;; Chat with roles</span>
<span class="p">(</span><span class="b">llm/chat</span>
  <span class="p">[</span><span class="p">(</span><span class="b">message</span> <span class="kw">:system</span> <span class="s">"You are helpful."</span><span class="p">)</span>
   <span class="p">(</span><span class="b">message</span> <span class="kw">:user</span> <span class="s">"What is Lisp?"</span><span class="p">)]</span>
  <span class="p">{</span><span class="kw">:max-tokens</span> <span class="n">100</span><span class="p">})</span>

<span class="c">;; Structured extraction</span>
<span class="p">(</span><span class="b">llm/extract</span>
  <span class="p">{</span><span class="kw">:vendor</span> <span class="p">{</span><span class="kw">:type</span> <span class="kw">:string</span><span class="p">}</span>
   <span class="kw">:amount</span> <span class="p">{</span><span class="kw">:type</span> <span class="kw">:number</span><span class="p">}}</span>
  <span class="s">"Coffee $4.50 at Blue Bottle"</span><span class="p">)</span>
<span class="c">; =&gt; {:amount 4.5 :vendor "Blue Bottle"}</span>

<span class="c">;; Classification</span>
<span class="p">(</span><span class="b">llm/classify</span> <span class="p">[</span><span class="kw">:positive</span> <span class="kw">:negative</span> <span class="kw">:neutral</span><span class="p">]</span>
  <span class="s">"This product is amazing!"</span><span class="p">)</span>
<span class="c">; =&gt; :positive</span></code></pre>
  </div>
</section>

<!-- ——— Tools & Agents ——— -->
<section class="split compact">
  <div class="split-text">
    <div class="label">Function Calling</div>
    <h2><span class="paren">(</span>Tools &amp; Agents<span class="paren">)</span></h2>
    <p>
      Define tools with <code class="ic">deftool</code>&mdash;the LLM sees the
      schema, calls your Lisp function, and uses the result. Parameters are
      converted from JSON to Sema values automatically.
    </p>
    <p>
      <code class="ic">defagent</code> combines a system prompt, tools, and a
      multi-turn loop. The agent calls tools and reasons until it has an
      answer or hits <code class="ic">:max-turns</code>.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Define a tool</span>
<span class="p">(</span><span class="k">deftool</span> lookup-capital
  <span class="s">"Look up the capital of a country"</span>
  <span class="p">{</span><span class="kw">:country</span> <span class="p">{</span><span class="kw">:type</span> <span class="kw">:string</span>
             <span class="kw">:description</span> <span class="s">"Country name"</span><span class="p">}}</span>
  <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span>country<span class="p">)</span>
    <span class="p">(</span><span class="k">cond</span>
      <span class="p">((</span><span class="b">=</span> country <span class="s">"Norway"</span><span class="p">)</span> <span class="s">"Oslo"</span><span class="p">)</span>
      <span class="p">((</span><span class="b">=</span> country <span class="s">"France"</span><span class="p">)</span> <span class="s">"Paris"</span><span class="p">)</span>
      <span class="p">(</span>else <span class="s">"Unknown"</span><span class="p">))))</span>

<span class="c">;; Use tools in chat</span>
<span class="p">(</span><span class="b">llm/chat</span>
  <span class="p">[</span><span class="p">(</span><span class="b">message</span> <span class="kw">:user</span> <span class="s">"Capital of Norway?"</span><span class="p">)]</span>
  <span class="p">{</span><span class="kw">:tools</span> <span class="p">[</span>lookup-capital<span class="p">]})</span>

<span class="c">;; Agent with multi-turn loop</span>
<span class="p">(</span><span class="k">defagent</span> geography-bot
  <span class="p">{</span><span class="kw">:system</span> <span class="s">"You answer geography questions."</span>
   <span class="kw">:tools</span>  <span class="p">[</span>lookup-capital<span class="p">]</span>
   <span class="kw">:max-turns</span> <span class="n">3</span><span class="p">})</span>
<span class="p">(</span><span class="b">agent/run</span> geography-bot <span class="s">"Capital of France?"</span><span class="p">)</span></code></pre>
  </div>
</section>

<!-- ——— Conversations & Streaming ——— -->
<section class="split reverse compact">
  <div class="split-text">
    <div class="label">Stateful Dialogue</div>
    <h2><span class="paren">(</span>Conversations<span class="paren">)</span></h2>
    <p>
      Immutable conversation values that accumulate message history.
      <code class="ic">conversation/say</code> sends a message, gets a reply,
      and returns a new conversation with both appended.
    </p>
    <p>
      Stream tokens in real-time with <code class="ic">llm/stream</code>.
      Process collections in parallel with <code class="ic">llm/pmap</code>
      and <code class="ic">llm/batch</code>.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Persistent conversations</span>
<span class="p">(</span><span class="k">define</span> c <span class="p">(</span><span class="b">conversation/new</span> <span class="p">{}))</span>
<span class="p">(</span><span class="k">define</span> c <span class="p">(</span><span class="b">conversation/say</span> c
  <span class="s">"Remember: the secret is 7"</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> c <span class="p">(</span><span class="b">conversation/say</span> c
  <span class="s">"What is the secret?"</span><span class="p">))</span>
<span class="p">(</span><span class="b">conversation/last-reply</span> c<span class="p">)</span>
<span class="c">; =&gt; "The secret is 7."</span>

<span class="c">;; Streaming</span>
<span class="p">(</span><span class="b">llm/stream</span> <span class="s">"Tell me a story"</span>
  <span class="p">{</span><span class="kw">:max-tokens</span> <span class="n">200</span><span class="p">})</span>

<span class="c">;; Parallel batch processing</span>
<span class="p">(</span><span class="b">llm/pmap</span>
  <span class="p">(</span><span class="k">fn</span> <span class="p">(</span>word<span class="p">)</span> <span class="p">(</span><span class="b">format</span> <span class="s">"Define: ~a"</span> word<span class="p">))</span>
  '<span class="p">(</span><span class="s">"serendipity"</span> <span class="s">"ephemeral"</span><span class="p">)</span>
  <span class="p">{</span><span class="kw">:max-tokens</span> <span class="n">50</span><span class="p">})</span>

<span class="c">;; Provider management</span>
<span class="p">(</span><span class="b">llm/list-providers</span><span class="p">)</span>     <span class="c">; =&gt; (:anthropic :openai ...)</span>
<span class="p">(</span><span class="b">llm/set-default</span> <span class="kw">:openai</span><span class="p">)</span>
<span class="p">(</span><span class="b">llm/set-budget</span> <span class="n">1.00</span><span class="p">)</span>    <span class="c">; $1 spending limit</span></code></pre>
  </div>
</section>

<!-- ——— Embeddings ——— -->
<section class="split compact">
  <div class="split-text">
    <div class="label">Semantic Search</div>
    <h2><span class="paren">(</span>Embeddings<span class="paren">)</span></h2>
    <p>
      Generate embeddings with <code class="ic">llm/embed</code> and compute
      cosine similarity with <code class="ic">llm/similarity</code>.
      Supports Jina, Voyage, Cohere, and OpenAI embedding models.
    </p>
    <p>
      Batch embed multiple texts in a single call. Use with
      <code class="ic">sort-by</code> to build simple semantic search.
    </p>
  </div>
  <div class="split-code">
<pre><code><span class="c">;; Generate embeddings</span>
<span class="p">(</span><span class="k">define</span> v1 <span class="p">(</span><span class="b">llm/embed</span> <span class="s">"hello world"</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> v2 <span class="p">(</span><span class="b">llm/embed</span> <span class="s">"hi there"</span><span class="p">))</span>
<span class="p">(</span><span class="b">llm/similarity</span> v1 v2<span class="p">)</span>  <span class="c">; =&gt; 0.87</span>

<span class="c">;; Batch embeddings</span>
<span class="p">(</span><span class="b">llm/embed</span> <span class="p">[</span><span class="s">"cat"</span> <span class="s">"dog"</span> <span class="s">"fish"</span><span class="p">])</span>
<span class="c">; =&gt; ((...) (...) (...))</span>

<span class="c">;; Simple semantic search</span>
<span class="p">(</span><span class="k">define</span> query <span class="p">(</span><span class="b">llm/embed</span> <span class="s">"programming"</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> docs
  <span class="p">(</span><span class="b">map</span> <span class="p">(</span><span class="k">fn</span> <span class="p">(</span>d<span class="p">)</span> <span class="p">{</span><span class="kw">:text</span> d
              <span class="kw">:vec</span>  <span class="p">(</span><span class="b">llm/embed</span> d<span class="p">)})</span>
    '<span class="p">(</span><span class="s">"Lisp is great"</span>
      <span class="s">"cooking recipes"</span>
      <span class="s">"Rust programming"</span><span class="p">)))</span>
<span class="p">(</span><span class="b">sort-by</span>
  <span class="p">(</span><span class="k">fn</span> <span class="p">(</span>d<span class="p">)</span> <span class="p">(</span><span class="b">-</span> <span class="p">(</span><span class="b">llm/similarity</span> query <span class="p">(</span><span class="kw">:vec</span> d<span class="p">))))</span>
  docs<span class="p">)</span></code></pre>
  </div>
</section>

<!-- ——— LLM function reference ——— -->
<div class="ref-section">
  <h3>LLM Function Reference</h3>
  <div class="stdlib-grid">
    <div class="stdlib-card">
      <h4>Completion &amp; Chat</h4>
      <div class="fn-list">
        <span>llm/complete</span> <span>llm/chat</span> <span>llm/send</span>
        <span>llm/stream</span> <span>llm/extract</span> <span>llm/classify</span>
        <span>llm/batch</span> <span>llm/pmap</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Provider Management</h4>
      <div class="fn-list">
        <span>llm/configure</span> <span>llm/auto-configure</span>
        <span>llm/set-default</span> <span>llm/list-providers</span>
        <span>llm/current-provider</span>
        <span>llm/configure-embeddings</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Embeddings</h4>
      <div class="fn-list">
        <span>llm/embed</span> <span>llm/similarity</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Cost &amp; Usage</h4>
      <div class="fn-list">
        <span>llm/last-usage</span> <span>llm/session-usage</span> <span>llm/reset-usage</span>
        <span>llm/set-budget</span> <span>llm/clear-budget</span> <span>llm/budget-remaining</span>
        <span>llm/set-pricing</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Conversations</h4>
      <div class="fn-list">
        <span>conversation/new</span> <span>conversation/say</span>
        <span>conversation/messages</span> <span>conversation/last-reply</span>
        <span>conversation/add-message</span> <span>conversation/model</span>
        <span>conversation/fork</span>
      </div>
    </div>
    <div class="stdlib-card">
      <h4>Accessors &amp; Predicates</h4>
      <div class="fn-list">
        <span>tool/name</span> <span>tool/description</span> <span>tool/parameters</span>
        <span>agent/name</span> <span>agent/system</span> <span>agent/tools</span>
        <span>agent/model</span> <span>agent/max-turns</span> <span>agent/run</span>
        <span>prompt/messages</span> <span>prompt/append</span> <span>prompt/set-system</span>
        <span>message/role</span> <span>message/content</span>
        <span>prompt?</span> <span>message?</span> <span>conversation?</span>
        <span>tool?</span> <span>agent?</span>
      </div>
    </div>
  </div>
</div>

<!-- ——— Providers ——— -->
<div class="providers-strip">
  <h3>Supported Providers</h3>
  <div class="provider-list">
    <span>Anthropic</span>
    <span>OpenAI</span>
    <span>Google Gemini</span>
    <span>Ollama</span>
    <span>Groq</span>
    <span>xAI</span>
    <span>Mistral</span>
    <span>Moonshot</span>
    <span>Jina</span>
    <span>Voyage</span>
    <span>Cohere</span>
  </div>
</div>

<!-- ═══════════════════════════════════════════════════════
     FEATURES / ARCHITECTURE / INSTALL
     ═══════════════════════════════════════════════════════ -->

<section id="features" class="features-section">
  <h2><span class="paren">(</span>Features<span class="paren">)</span></h2>
  <div class="features-grid">
    <div class="feat">
      <h3>Tail-Call Optimized</h3>
      <p>Trampoline-based evaluator. Deep recursion without stack overflow.</p>
    </div>
    <div class="feat">
      <h3>Comprehensive Builtins</h3>
      <p>I/O, HTTP, regex, JSON, crypto, CSV, datetime, math, and more.</p>
    </div>
    <div class="feat">
      <h3>Tool Use &amp; Agents</h3>
      <p><code>deftool</code> and <code>defagent</code> as native special forms with multi-turn loops.</p>
    </div>
    <div class="feat">
      <h3>Structured Extraction</h3>
      <p>Define a schema as a map, get typed data back. <code>llm/extract</code> + <code>llm/classify</code>.</p>
    </div>
    <div class="feat">
      <h3>Streaming &amp; Batching</h3>
      <p>Real-time token streaming with <code>llm/stream</code>. Parallel batch with <code>llm/pmap</code>.</p>
    </div>
    <div class="feat">
      <h3>Persistent Conversations</h3>
      <p>Conversations are immutable values. Fork, extend, inspect message history as data.</p>
    </div>
    <div class="feat">
      <h3>Module System</h3>
      <p>File-based modules with <code>import</code> and <code>export</code>. Paths resolve relative to current file.</p>
    </div>
    <div class="feat">
      <h3>Error Handling</h3>
      <p><code>try</code> / <code>catch</code> / <code>throw</code> with typed error maps and full stack traces.</p>
    </div>
    <div class="feat">
      <h3>Cost Tracking</h3>
      <p>Per-call and session usage tracking. Budget limits with <code>llm/set-budget</code>.</p>
    </div>
    <div class="feat">
      <h3>11 LLM Providers</h3>
      <p>Anthropic, OpenAI, Gemini, Ollama, Groq, xAI, Mistral, Moonshot, Jina, Voyage, Cohere.</p>
    </div>
    <div class="feat">
      <h3>Macros</h3>
      <p><code>defmacro</code> with quasiquote/unquote/splicing. <code>macroexpand</code> for inspection.</p>
    </div>
    <div class="feat">
      <h3>Clojure-Style Data</h3>
      <p>Keywords (<code>:foo</code>), maps (<code>{:k v}</code>), vectors (<code>[1 2]</code>). Keywords as functions.</p>
    </div>
    <div class="feat">
      <h3>Record Types</h3>
      <p><code>define-record-type</code> with auto-generated constructor, predicate, and field accessors.</p>
    </div>
    <div class="feat">
      <h3>Bytevectors</h3>
      <p>R7RS bytevectors with <code>#u8(...)</code> literals. UTF-8 encoding/decoding and byte-level I/O.</p>
    </div>
  </div>
</section>

<!-- ——— Architecture ——— -->
<section id="architecture" class="arch-section">
  <h2><span class="paren">(</span>Architecture<span class="paren">)</span></h2>
  <p>
    Six Rust crates, one directed dependency graph. No circular dependencies.
    Single-threaded with <code class="ic">Rc</code>,
    deterministic ordering with <code class="ic">BTreeMap</code>.
  </p>

  <div class="crate-grid">
    <div class="crate-card">
      <h4>sema-core</h4>
      <p>Value types, environment, errors</p>
    </div>
    <div class="crate-card">
      <h4>sema-reader</h4>
      <p>Lexer and s-expression parser</p>
    </div>
    <div class="crate-card">
      <h4>sema-eval</h4>
      <p>Trampoline evaluator, special forms, modules</p>
    </div>
    <div class="crate-card">
      <h4>sema-stdlib</h4>
      <p>Comprehensive standard library builtins</p>
    </div>
    <div class="crate-card">
      <h4>sema-llm</h4>
      <p>LLM provider trait, multi-provider API clients, streaming</p>
    </div>
    <div class="crate-card">
      <h4>sema</h4>
      <p>REPL, CLI, file runner</p>
    </div>
  </div>

  <div class="arch-diagram">
<pre><code>         sema-core
         /    |    \
  sema-reader | sema-stdlib
         \    |    /
        sema-eval   sema-llm
             \       /
              sema</code></pre>
  </div>
</section>

<!-- ——— Install ——— -->
<section id="install" class="install-section">
  <h2><span class="paren">(</span>Install<span class="paren">)</span></h2>
  <p>Get running in one command, or build from source.</p>

  <div class="install-methods">
    <div class="install-card">
      <h3>One-liner</h3>
<pre><code><span class="prompt">$</span> cargo install \
    --git https://github.com/HelgeSverre/sema \
    sema</code></pre>
    </div>
    <div class="install-card">
      <h3>From source</h3>
<pre><code><span class="prompt">$</span> git clone https://github.com/HelgeSverre/sema
<span class="prompt">$</span> cd sema
<span class="prompt">$</span> cargo build --release</code></pre>
    </div>
  </div>

  <div class="usage-block">
    <h3>Usage</h3>
<pre><code><span class="prompt">$</span> sema                              <span class="comment"># Start the REPL</span>
<span class="prompt">$</span> sema script.sema                  <span class="comment"># Run a file</span>
<span class="prompt">$</span> sema -e <span class="s">'(+ 1 2)'</span>                 <span class="comment"># Eval expression</span>
<span class="prompt">$</span> sema -p <span class="s">'(filter even? (range 10))'</span> <span class="comment"># Eval &amp; print</span>
<span class="prompt">$</span> sema -l prelude.sema script.sema  <span class="comment"># Load then run</span>
<span class="prompt">$</span> sema --no-llm script.sema         <span class="comment"># No LLM features</span></code></pre>
  </div>
</section>

<!-- ——— Footer ——— -->
<footer>
  <p>MIT &mdash; <a href="https://github.com/HelgeSverre/sema">source</a></p>
</footer>

</body>
</html>
