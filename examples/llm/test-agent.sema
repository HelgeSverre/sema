;; test-agent.sema â€” Test agent with tools

(llm/auto-configure)

;; Define tools
(deftool get-weather
  "Get current weather for a city"
  {:city {:type :string :description "City name"}}
  (lambda (city)
    (format "{\"city\": \"~a\", \"temperature\": 22, \"condition\": \"sunny\"}"
      city)))

(deftool get-time
  "Get the current time"
  {}
  (lambda ()
    "2025-06-15 14:30:00 UTC"))

;; Define an agent
(defagent weather-bot
  {:system "You are a helpful weather assistant. Use tools to answer questions. Be concise."
   :tools [get-weather get-time]
   :max-turns 5})

;; Run the agent
(println "=== Agent Test ===")
(define answer
  (agent/run weather-bot "What's the weather like in Oslo right now?"))
(println answer)

(println "\n=== Usage ===")
(println (llm/session-usage))

(println "\nDone!")
