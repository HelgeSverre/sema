;; Closures and higher-order functions
(define (make-counter start)
  (let ((n start))
    (lambda ()
      (set! n (+ n 1))
      n)))

(define counter (make-counter 0))
(println (counter))  ; 1
(println (counter))  ; 2
(println (counter))  ; 3

;; Compose functions
(define (compose f g)
  (lambda (x) (f (g x))))

(define add1-then-double
  (compose (fn (x) (* x 2))
           (fn (x) (+ x 1))))

(map add1-then-double (range 1 6))
